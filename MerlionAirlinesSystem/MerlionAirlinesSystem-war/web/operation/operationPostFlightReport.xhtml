<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../templates/DefaultTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="head">
        <!--insert customized import here-->
    </ui:define>

    <ui:define name="title">Post Flight Report</ui:define>

    <ui:define name="menubar">
          <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-h1"><a href="#">Aircraft Management </a></li> 
                <li><a href="viewMaintenanceSchedule.xhtml">Aircraft Maintenance </a></li> 
                <li><a href="viewFlightSchedule.xhtml">Flight Schedule </a></li> 
                <li><a href="operationDisplayFlights.xhtml">Flight Display </a></li> 
                <li class="sidebar-h1"><a href="#">Staff Management</a></li> 
                <li><a href="retrieveDuty.xhtml"> Retrieve Duty </a></li> 
                <li class="sidebar-h1"><a href="#">Flight Management </a></li>                     
                <li><a href="operationPostFlightReport.xhtml">Post-Flight Report</a></li>  
            </ul>
        </div> 
    </ui:define>





    <ui:define name="centerPanel">
        <h:form id="form">
            <p:growl id="msgs" showDetail="true"/>
            <p:dataTable id="editAircraft" var="flight" value="#{postFlightReportManagedBean.list}" style="width: 800px" >
                <f:facet name="header" >
                    Operation Post Flight Report 
                </f:facet>
                <p:column headerText="Flight No" style="width: 100px">
                    <h:outputText value="#{flight.flightNo}" />
                </p:column>
                <p:column headerText="Departure Date" style="width: 100px">
                    <h:outputText value="#{flight.departureDate}" />
                </p:column>
                <p:column headerText="Arrival Date" style="width: 100px">
                    <h:outputText value="#{flight.arrivalDate}" />
                </p:column>
                <p:column headerText="Origin" style="width: 100px" >
                    <h:outputText value="#{flight.route.originAirport.airportName}" />
                </p:column>
                <p:column headerText="Destination" style="width: 100px" >
                    <h:outputText value="#{flight.route.destinationAirport.airportName}" />
                </p:column>
                <p:column style="width:50px;text-align: center" headerText="Basic Info">
                    <p:commandLink update=":viewFlightForm:flightDetail" actionListener="#{postFlightReportManagedBean.updateFlightReportActionListener}" title="View Details" styleClass="ui-icon ui-icon-search" >
                        <f:attribute value="#{flight}" name="flight" />
                    </p:commandLink>
                </p:column>

                <p:column style="width:50px;text-align: center" headerText="Special Records">
                    <p:commandLink update=":updateFlightForm:flightSpecialDetail" actionListener="#{postFlightReportManagedBean.updateFlightSpecialReportActionListener}" title="View or Edit " styleClass="ui-icon ui-icon-search" >
                        <f:attribute value="#{flight}" name="flight" />
                    </p:commandLink>
                </p:column>
            </p:dataTable>
        </h:form>

        <p:dialog id="SecDialog" header="Special Info" widgetVar="flightSpecialDialog"  showEffect="fade"  resizable="false">
            <h:form id="updateFlightForm">
                <p:growl id="detail" showDetail="true"/>
                <p:outputPanel id="flightSpecialDetail" >
                    <p:panelGrid  columns="2"   rendered="#{not empty postFlightReportManagedBean.selectedFlight}">

                        <h:outputLabel for="emergency" value="1. Emergency of ATC violation:" style="font-weight:bold"/>
                        <h:inputText id="emergency"   value="#{postFlightReportManagedBean.selectedFlight.emergencyOfAtcViolation}" style="width:100px"/>

                        <h:outputLabel  for="mechanicalFailures" value="2. Mechanical failures: " style="font-weight:bold"/>                        
                        <h:inputText id="mechanicalFailures" value="#{postFlightReportManagedBean.selectedFlight.mechanicalFailures}" style="width:100px"/>

                        <h:outputLabel  for="fuelDumping" value="3. Fuel dumping: " style="font-weight:bold"/>
                        <h:inputText id="fuelDumping" value="#{postFlightReportManagedBean.selectedFlight.fuelDumping}" style="width:100px"/>

                        <h:outputLabel  for="passengerSpecialStatus" value="4. Illness/injury/death of a passenger: " style="font-weight:bold"/>
                        <h:inputText id="passengerSpecialStatus" value="#{postFlightReportManagedBean.selectedFlight.passengerSpecialStatus}" style="width:100px"/>

                        <h:outputLabel  for="crewSpecialStatus" value="5. Illness/injury/death of a crew member: " style="font-weight:bold"/>
                        <h:inputText id="crewSpecialStatus" value="#{postFlightReportManagedBean.selectedFlight.crewSpecialStatus}" style="width:100px"/>

                        <h:outputLabel  for="passengerMisconduct" value="6. Passenger misconduct (e.g. smoking): " style="font-weight:bold"/>
                        <h:inputText id="passengerMisconduct" value="#{postFlightReportManagedBean.selectedFlight.passengerMisconduct}" style="width:100px"/>

                        <h:outputLabel  for="hazmatIssue" value="7. HAZMAT issue: " style="font-weight:bold"/>
                        <h:inputText id="hazmatIssue" value="#{postFlightReportManagedBean.selectedFlight.hazmatIssue}" style="width:100px"/>

                        <h:outputLabel  for="diversions" value="8. Diversions: " style="font-weight:bold"/>
                        <h:inputText id="diversions" value="#{postFlightReportManagedBean.selectedFlight.diversions}" style="width:100px"/>

                        <h:outputLabel  for="highSpeedAborts" value="9. High-speed aborts:" style="font-weight:bold"/>
                        <h:inputText id="highSpeedAborts" value="#{postFlightReportManagedBean.selectedFlight.highSpeedAborts}" style="width:100px"/>

                        <h:outputLabel  for="lightningStrikers" value="10. Lightning strikes: " style="font-weight:bold"/>
                        <h:inputText id="lightningStrikers" value="#{postFlightReportManagedBean.selectedFlight.lightningStrikers}" style="width:100px"/>

                        <h:outputLabel  for="nearAirCollisions" value="11. Near-air collisions:" style="font-weight:bold"/>
                        <h:inputText id="nearAirCollisions" value="#{postFlightReportManagedBean.selectedFlight.nearAirCollisions}" style="width:100px"/>

                        <h:outputLabel  for="others" value="12. Others: " style="font-weight:bold"/>
                        <h:inputText id="others" value="#{postFlightReportManagedBean.selectedFlight.others}" style="width:100px"/>
                    </p:panelGrid>

                    <p:commandButton value="Submit" update="detail" actionListener="#{postFlightReportManagedBean.update}" icon="ui-icon-check" >
                        <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                    </p:commandButton>

                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>

                </p:outputPanel>
            </h:form>



        </p:dialog>


        <p:dialog id="Dialog" header="Flight Info" widgetVar="flightDialog"  showEffect="fade"  resizable="false">
            <h:form id="viewFlightForm">
                <p:outputPanel id="flightDetail" >
                    <p:panelGrid  columns="2" columnClasses="label,value" rendered="#{not empty postFlightReportManagedBean.selectedFlight}" >
                        <h:outputLabel for="flightId" value="Flight ID: " style="font-weight:bold"/>
                        <h:outputText id="flightId" value="#{postFlightReportManagedBean.selectedFlight.flightNo}" />
                        <h:outputLabel for="origin" value="Origin City" style="font-weight:bold"/>
                        <h:outputText id="origin" value="#{postFlightReportManagedBean.selectedFlight.route.originAirport.cityName}" />
                        <h:outputLabel for="originAirport" value="Origin Airport" style="font-weight:bold"/>
                        <h:outputText id="originAirport" value="#{postFlightReportManagedBean.selectedFlight.route.originAirport.airportName}"  />
                        <h:outputLabel for="destination" value="Destination City" style="font-weight:bold" />
                        <h:outputText id="destination" value="#{postFlightReportManagedBean.selectedFlight.route.destinationAirport.cityName}" />
                        <h:outputLabel for="destinationAirport" value="Destination Airport" style="font-weight:bold" />
                        <h:outputText id="destinationAirport" value="#{postFlightReportManagedBean.selectedFlight.route.destinationAirport.airportName}"  />

                        <h:outputText id="estimatedDepartureTime" value="Estimated Departure Timing" style="font-weight:bold" />
                        <h:outputLabel for="estimatedDepartureTime" value="#{postFlightReportManagedBean.selectedFlight.departureDate}" />
                        <h:outputText id="actualDepartureTime" value="Actual departure timing" style="font-weight:bold" />
                        <h:outputLabel for="actualDepartureTime" value="#{postFlightReportManagedBean.selectedFlight.actualDepartureDate}" />
                        <h:outputText id="estimatedArrivalTime" value="Estimated arrival timing" style="font-weight:bold" />
                        <h:outputLabel for="estimatedArrivalTime" value="#{postFlightReportManagedBean.selectedFlight.arrivalDate}" />
                        <h:outputText id="actualArrivalTime" value="Actual arrival timing" style="font-weight:bold" />
                        <h:outputLabel for="actualArrivalTime" value="#{postFlightReportManagedBean.selectedFlight.actualArrivalDate}"/>

                    </p:panelGrid>
                </p:outputPanel>
            </h:form>
        </p:dialog>


    </ui:define>
</ui:composition>
