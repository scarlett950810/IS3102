<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./systemAdminHome.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="centerPanel">
        <p:tabView activeIndex="#{staffManagementManagedBean.tabIndex}" dynamic="true">
            <p:tab title="Add Company Staff">
                <h:form>
                    <p:growl id="growl" showDetail="true"/>

                    <h:panelGrid columns="2" cellpadding="5" style="margin-bottom: 10px;">
                        <p:outputLabel for="staffNo" value="Staff No" />
                        <p:inputText style="width:100%;" id="staffNo" value="#{staffManagementManagedBean.staffNo}" label="staffNo" required="true" requiredMessage="Please input staff number">
                            <p:watermark for="staffNo" value="Please enter staff Number" />
                        </p:inputText> 

                        <p:outputLabel for="staffName" value="Staff Name" />
                        <p:inputText style="width:100%;" id="staffName" value="#{staffManagementManagedBean.name}" label="staffName" required="true" requiredMessage="Please input staff name">
                            <p:watermark for="staffName" value="Please enter staff name" />
                        </p:inputText> 

                        <p:outputLabel for="gender" value="Gender: " />
                        <p:inputText style="width:100%;" id="gender" value="#{staffManagementManagedBean.gender}" label="gender" required="true" requiredMessage="Please input staff gender">
                            <p:watermark for="gender" value="Please enter gender" />
                        </p:inputText>
                        
                        <p:outputLabel for="email" value="Email Address: " />
                        <p:inputText style="width:100%;" id="email" value="#{staffManagementManagedBean.email}" label="email" required="true" requiredMessage="Please input staff email address">
                            <p:watermark for="email" value="Please enter email address" />
                        </p:inputText>

                        <p:outputLabel for="contactNumber" value="Contact Number: " />
                        <p:inputText style="width:100%;" id="contactNumber" value="#{staffManagementManagedBean.contactNumber}" label="contactNumber" required="true" requiredMessage="Please input contact number">
                            <p:watermark for="contactNumber" value="Please enter contact number" />
                        </p:inputText>

                        <p:outputLabel for="address" value="Staff Address: " />
                        <p:inputText style="width:100%;" id="address" value="#{staffManagementManagedBean.address}" label="address" required="true" requiredMessage="Please input staff address">
                            <p:watermark for="address" value="Please enter staff address" />
                        </p:inputText>
                        
                        <p:outputLabel for="businessUnit" value="Business Unit: " />
                        <p:inputText style="width:100%;" id="businessUnit" value="#{staffManagementManagedBean.businessUnit}" label="businessUnit" required="true" requiredMessage="Please input staff business unit">
                            <p:watermark for="businessUnit" value="Please enter business unit" />
                        </p:inputText>

                        <p:outputLabel for="division" value="Division: " />
                        <p:inputText style="width:100%;" id="division" value="#{staffManagementManagedBean.division}" label="division" required="true" requiredMessage="Please input staff division">
                            <p:watermark for="division" value="Please enter staff division" />
                        </p:inputText>
                        
                        <p:outputLabel for="position" value="Position: " />
                        <p:inputText style="width:100%;" id="position" value="#{staffManagementManagedBean.position}" label="position" required="true" requiredMessage="Please input staff position">
                            <p:watermark for="position" value="Please enter staff position" />
                        </p:inputText>
                        
                        <p:outputLabel for="location" value="Location: " />
                        <p:inputText style="width:100%;" id="location" value="#{staffManagementManagedBean.location}" label="location" required="true" requiredMessage="Please input staff location">
                            <p:watermark for="location" value="Please enter staff location" />
                        </p:inputText>
                        
<!--                        <p:outputLabel for="base" value="Base: " />
                        <p:inputText style="width:100%;" id="base" value="{staffManagementManagedBean.base}" label="base" required="true" requiredMessage="Please input staff base">
                            <p:watermark for="base" value="Please enter staff base" />
                        </p:inputText>-->

                        <p:commandButton id="addStaff" value="confirm" actionListener="#{staffManagementManagedBean.addStaff()}" update="growl"/>

                    </h:panelGrid>

                </h:form>
            </p:tab>

            <p:tab title="View Staff Information">
                <h:form id="form" rendered="#{staffManagementManagedBean.table}">
                    <p:contextMenu for="staffList">
                        <p:menuitem value=" View" update="staffList" icon="ui-icon-search" actionListener="#{staffManagementManagedBean.viewStaffAccount()}"/>
                        <p:menuitem value=" Delete" update="staffList" icon="ui-icon-trash" actionListener="#{staffManagementManagedBean.delete()}" onclick="PF('deleteStaff').show();"/>

                    </p:contextMenu>

                    <p:dataTable id="staffList" var="staff" value="#{staffManagementManagedBean.staffList}" rowKey="#{staff.staffNo}"
                                 selection="#{staffManagementManagedBean.staff}" selectionMode="single" widgetVar="staffTable"
                                 emptyMessage="No staff found with given criteria" filteredValue="#{staffManagementManagedBean.filteredStaff}">
                        <f:facet name="header">
                            Merlion Airline Staff List
                        </f:facet>
                        <p:column headerText="Staff Number" filterBy="#{staff.staffNo}" filterMatchMode="contains">
                            <h:outputText value="#{staff.staffNo}" />
                        </p:column>
                        <p:column headerText="Staff Name" filterBy="#{staff.displayName}" filterMatchMode="contains">
                            <h:outputText value="#{staff.displayName}" />
                        </p:column>
                        <p:column headerText="Department" filterBy="#{staff.department}" filterMatchMode="exact">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('staffTable').filter()" >
                                    <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{staffManagementManagedBean.departments}" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{staff.department}" />
                        </p:column>
                        <p:column headerText="Email" filterBy="#{staff.email}" filterMatchMode="contains">
                            <h:outputText value="#{staff.email}" />
                        </p:column>
                    </p:dataTable>
                </h:form>

                <p:dialog widgetVar="deleteStaff" minHeight="40">
                    <h:outputText value="#{staffManagementManagedBean.staff.displayName}" />
                    <h:form>
                        <p:commandButton value="Confirm" actionListener="#{staffManagementManagedBean.deleteStaffAccount()}" style="margin-top: 20px"/>
                    </h:form>
                </p:dialog>

                <p:panelGrid columns="2" rendered="#{staffManagementManagedBean.view}">
                    <f:facet name="header">
                        <h:outputText value="Account Information" />
                    </f:facet>

                    <h:outputText value="Name:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.displayName}" />

                    <h:outputText value="Staff Number:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.staffNo}" />

                    <h:outputText value="Department:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.department}" />

                    <h:outputText value="Email Address:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.email}" />

                    <h:outputText value="Contact Number:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.contactNumber}" />

                    <h:outputText value="Address:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.address}" />

                    <h:outputText value="Base:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.base}" />

                    <h:outputText value="Gender:" />
                    <h:outputText value="#{staffManagementManagedBean.staff.gender}" />

                </p:panelGrid>

                <h:form rendered="#{staffManagementManagedBean.view}">
                    <p:commandButton value="Return" actionListener="#{staffManagementManagedBean.returnBack}" style="margin-top: 20px"/>
                    <p:commandButton value="Update Information" onclick="PF('updateStaff').show();" style="margin-top: 20px"/>
                </h:form>

                <p:dialog header="Update Staff Information" widgetVar="updateStaff" minHeight="40">
                    <h:form>
                        <p:growl id="growl" showDetail="true"/>

                        <h:panelGrid columns="2" cellpadding="5" style="margin-bottom: 10px;">

                            <p:outputLabel  value="Staff Name" />
                            <p:outputLabel  value="#{staffManagementManagedBean.staff.staffNo}" />

                            <p:outputLabel value="Staff Name" />
                            <p:outputLabel value="#{staffManagementManagedBean.staff.displayName}" />

                            <p:outputLabel for="email" value="Email Address: " />
                            <p:inputText style="width:100%;" id="email" value="#{staffManagementManagedBean.staff.email}" label="email" required="true" requiredMessage="Please input staff email address">
                            </p:inputText>

                            <p:outputLabel for="contactNumber" value="Contact Number: " />
                            <p:inputText style="width:100%;" id="contactNumber" value="#{staffManagementManagedBean.staff.contactNumber}" label="contactNumber" required="true" requiredMessage="Please input contact number">
                            </p:inputText>

                            <p:outputLabel for="newDepartment" value="Department: " />
                            <p:selectOneMenu id="newDepartment" value="#{staffManagementManagedBean.staff.department}" panelStyle="width:180px" required="true" requiredMessage="Please input department to set"
                                             effect="fade">
                                <f:selectItems value="#{staffManagementManagedBean.departments}"/>
                            </p:selectOneMenu>

                            <p:outputLabel for="address" value="Staff Address: " />
                            <p:inputText style="width:100%;" id="address" value="#{staffManagementManagedBean.staff.address}" label="address" required="true" requiredMessage="Please input staff address">
                            </p:inputText>

                            <p:outputLabel for="newBase" value="Base: " />
                            <p:selectOneMenu id="newBase" value="#{staffManagementManagedBean.staff.base}" panelStyle="width:180px" required="true" requiredMessage="Please input base to set"
                                             effect="fade">
                                <f:selectItems value="#{staffManagementManagedBean.bases}"/>
                            </p:selectOneMenu>

                            <p:commandButton id="updateStaff" value="confirm" actionListener="#{staffManagementManagedBean.updateStaff}" update="growl"/>

                        </h:panelGrid>

                    </h:form>
                </p:dialog>
            </p:tab>

            <p:tab title="Grant System Access">
                <h:panelGrid columns="2" cellpadding="10">
                    <h:outputText value="After a break of more than 15 years..." />
                </h:panelGrid>
            </p:tab>
        </p:tabView>
    </ui:define>

</ui:composition>
