<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../templates/DefaultTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <ui:define name="head">
    </ui:define>
    
    <ui:define name="menubar">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li><a href="inventorySeatsManagement.xhtml">Manu create booking class</a></li>                     
                <li><a href="inventoryCost.xhtml">Manage Cost</a></li>
                <!--<li><a href="inventoryBookingClassManagement.xhtml">Manage Booking Classes</a></li>-->         
                <li><a href="inventoryRulesManagement.xhtml">Manage Rules</a></li>
                <li><a href="inventoryRevenueManagement.xhtml">Manage Revenue</a></li>

            </ul>
        </div>
    </ui:define>
    
    <ui:define name="centerPanel">
        
        <p:growl id="growl" sticky="true" showDetail="true"/>


        <p:treeTable value="#{inventoryCostManagedBean.root}" var="costPair" style="width:424px">
            <f:facet name="header">
                Fixed cost per seat per mile
            </f:facet>
            <p:column headerText="Cost Type">
                <h:outputText value="#{costPair.costType}" style="width: 500px" />
            </p:column>
            <p:column headerText="Cost" >
                <h:outputText value="#{costPair.costFigure}"  style="width: 100px" />
            </p:column>
            <p:column style="width:100px"  headerText="Update Cost">
                <p:commandLink update=":updateCostForm:costPanel" actionListener="#{inventoryCostManagedBean.updateCostActionListener}" title="Edit Cost" styleClass="ui-icon ui-icon-script" >
                    <f:attribute value="#{costPair}" name="costPair" />
                </p:commandLink>
            </p:column>
        </p:treeTable>

        <p:dialog id="dialog" header="Edit Cost" showEffect="fade" widgetVar="costDialog"  resizable="false">
            <h:form id="updateCostForm">
                <p:outputPanel id="costPanel">
                    <p:panelGrid  columns="2" columnClasses="label,value" rendered="#{not empty inventoryCostManagedBean.selectedCost}">
                        <h:outputLabel for="name" value="Name: " />
                        <h:outputText id="name" value="#{inventoryCostManagedBean.selectedCost.costType}"  style="font-weight:bold" />
                        <h:outputLabel for="number" value="Number: " />
                        <h:outputText id="number" value="#{inventoryCostManagedBean.selectedCost.costFigure}" style="font-weight:bold" />

                        <p:outputLabel for="newNumber" value="New Number: " />
                        <p:inputText style="width:100%;" id="newNumber"  value="#{inventoryCostManagedBean.newCost}" 
                                     label="NewNumber" required="true" requiredMessage="Please enter the new cost">
                            <p:watermark for="newNumber" value="Please enter the new cost" />
                        </p:inputText>   
                    </p:panelGrid>
                </p:outputPanel>
                <p:commandButton id="updateCost"  value="Update Cost" ajax="false" actionListener="#{inventoryCostManagedBean.updateCost}"  >
                </p:commandButton>

            </h:form>
        </p:dialog>


    </ui:define>
</ui:composition>

