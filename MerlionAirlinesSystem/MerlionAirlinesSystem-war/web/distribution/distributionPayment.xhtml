<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../templates/DefaultTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="head">
        <!--insert customized import here-->
    </ui:define>

    <ui:define name="title">Distribution - Select Flight</ui:define>

    <ui:define name="menubar">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li><a href="#"></a></li>                     
                <li><a href="#"></a></li>         
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
            </ul>
        </div>
    </ui:define>

    <ui:define name="centerPanel">


        <form id="checkout" method="post" action="/checkout" >
            <div id="payment-form"></div>
            <input type="submit" value="Pay"></input>
        </form>

        <script src="https://js.braintreegateway.com/v2/braintree.js"></script>
        <script>
            // We generated a client token for you so you can test out this code
            // immediately. In a production-ready integration, you will need to
            // generate a client token on your server (see section below).
            //                    braintree.setup(clientToken, "dropin", {
            //                    container: "payment-form"
            //                    }); 




            var clientToken = "#{distributionPayment.clientToken}"
            console.log("aaaa" + clientToken);

            braintree.setup(clientToken, "dropin", {
                container: "payment-form",
                onPaymentMethodReceived: function (obj) {
//    doSomethingWithTheNonce(obj.nonce);
                    console.log("nonce <br/>");
                    console.log(obj.nonce);
                }

            });
        </script>
        
        

    </ui:define>
</ui:composition>
